# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è LongCodeZip-rs - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

**–ú–æ–¥—É–ª–∏:**
- ‚úÖ `lib.rs` - –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å —Å —ç–∫—Å–ø–æ—Ä—Ç–∞–º–∏
- ‚úÖ `types.rs` - –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `error.rs` - –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- ‚úÖ `provider.rs` - LLM API –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- ‚úÖ `code_splitter.rs` - –ü–∞—Ä—Å–µ—Ä –∫–æ–¥–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤
- ‚úÖ `compressor.rs` - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏

### 2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è:**
- ‚úÖ Python
- ‚úÖ Rust
- ‚úÖ TypeScript
- ‚úÖ JavaScript
- ‚úÖ C++
- ‚úÖ Java
- ‚úÖ Go

**–ö–æ–º–ø—Ä–µ—Å—Å–∏—è:**
- ‚úÖ Coarse-grained (—Ñ—É–Ω–∫—Ü–∏—è-—É—Ä–æ–≤–µ–Ω—å)
- ‚úÖ –†–∞–∑–±–∏–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏/–∫–ª–∞—Å—Å—ã
- ‚úÖ –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∫ –∑–∞–ø—Ä–æ—Å—É
- ‚úÖ –í—ã–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –±—é–¥–∂–µ—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞

**API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- ‚úÖ OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- ‚úÖ DeepSeek API (–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ)
- ‚úÖ –†–∞—Å—á–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ keyword matching
- ‚úÖ –ü—Ä–∏–±–ª–∏–∂–µ–Ω–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
- ‚úÖ –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ (rate)
- ‚úÖ –¶–µ–ª–µ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –í—ã–±–æ—Ä —è–∑—ã–∫–∞
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- ‚úÖ Builder pattern –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**Unit —Ç–µ—Å—Ç—ã:**
- ‚úÖ –†–∞–∑–±–∏–µ–Ω–∏–µ –∫–æ–¥–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤
- ‚úÖ –ü–æ–¥—Å—á–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –†–∞—Å—á–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –∫–æ–º–ø—Ä–µ—Å—Å–∏—è

**Integration —Ç–µ—Å—Ç—ã:**
- ‚úÖ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ Python
- ‚úÖ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ Rust
- ‚úÖ –ö–æ–º–ø—Ä–µ—Å—Å–∏—è —Å –∑–∞–ø—Ä–æ—Å–æ–º
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —è–∑—ã–∫–æ–≤—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
```
running 11 tests
test result: ok. 11 passed; 0 failed
```

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:**
- ‚úÖ `README.md` - –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- ‚úÖ `QUICKSTART.md` - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É
- ‚úÖ `EXAMPLES.md` - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ `ARCHITECTURE.md` - –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ `LICENSE` - MIT –ª–∏—Ü–µ–Ω–∑–∏—è
- ‚úÖ Inline –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ –∫–æ–¥–µ
- ‚úÖ Cargo doc –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

### 6. –ü—Ä–∏–º–µ—Ä—ã

**Demo –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
- ‚úÖ `examples/demo.rs` - –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä
- ‚úÖ –ö–æ–º–ø—Ä–µ—Å—Å–∏—è –±–æ–ª—å—à–æ–≥–æ Python –∫–æ–¥–∞
- ‚úÖ –í—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è API
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å DeepSeek API

### 7. –°–±–æ—Ä–∫–∞ –∏ —Ä–µ–ª–∏–∑

**Build —Å–∏—Å—Ç–µ–º–∞:**
- ‚úÖ Cargo.toml —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- ‚úÖ Debug —Å–±–æ—Ä–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Release —Å–±–æ—Ä–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è

## üéØ –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚ö° –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è (~15 —Å–µ–∫)
- ‚ö° –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ regex
- ‚ö° –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å API
- ‚ö° –ù–∏–∑–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- üîí –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Rust
- üîí –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ Result
- üîí –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ async/await
- üîí –ß–µ—Ç–∫–∞—è –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- üì¶ Builder pattern –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- üì¶ –ü–æ–Ω—è—Ç–Ω—ã–π API
- üì¶ –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üì¶ –†–∞–±–æ—á–∏–µ –ø—Ä–∏–º–µ—Ä—ã

## üöß –ß—Ç–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–¥–ª—è –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π)

### Fine-grained –∫–æ–º–ø—Ä–µ—Å—Å–∏—è
- ‚ùå Entropy-based chunking
- ‚ùå Knapsack –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–ª–æ–∫–æ–≤
- ‚ùå Line-level importance scoring
- ‚ùå Perplexity calculation —á–µ—Ä–µ–∑ API

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- ‚ùå Anthropic Claude
- ‚ùå Local models (llama.cpp)
- ‚ùå Azure OpenAI

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- ‚ùå CLI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚ùå Batch processing
- ‚ùå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å IDE

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚ùå –ù–∞—Å—Ç–æ—è—â–∏–π tokenizer (tiktoken)
- ‚ùå –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚ùå –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ chunks
- ‚ùå Streaming API –ø–æ–¥–¥–µ—Ä–∂–∫–∞

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

**–†–∞–∑–º–µ—Ä –∫–æ–¥–∞:**
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: ~800 —Å—Ç—Ä–æ–∫ Rust –∫–æ–¥–∞
- –¢–µ—Å—Ç—ã: ~150 —Å—Ç—Ä–æ–∫
- –ü—Ä–∏–º–µ—Ä—ã: ~150 —Å—Ç—Ä–æ–∫
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: ~1000 —Å—Ç—Ä–æ–∫

**–§–∞–π–ª—ã:**
- –ò—Å—Ö–æ–¥–Ω–∏–∫–∏: 6 —Ñ–∞–π–ª–æ–≤
- –¢–µ—Å—Ç—ã: 1 —Ñ–∞–π–ª
- –ü—Ä–∏–º–µ—Ä—ã: 1 —Ñ–∞–π–ª
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 5 —Ñ–∞–π–ª–æ–≤

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- tokio (async runtime)
- reqwest (HTTP client)
- serde/serde_json (JSON serialization)
- regex (code parsing)
- thiserror (error handling)
- anyhow (error context)
- async-trait (async traits)
- log/env_logger (logging)

## üéì –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Python –≤–µ—Ä—Å–∏–µ–π

| –§—É–Ω–∫—Ü–∏—è | Python | Rust-rs | –°—Ç–∞—Ç—É—Å |
|---------|--------|---------|--------|
| Coarse-grained | ‚úÖ | ‚úÖ | **–ü–æ–ª–Ω–æ—Å—Ç—å—é** |
| Fine-grained | ‚úÖ | ‚ùå | –ë—É–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è |
| API –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ | ‚úÖ | **–£–ª—É—á—à–µ–Ω–æ** |
| Transformers –º–æ–¥–µ–ª–∏ | ‚úÖ | ‚ùå | –î—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥ |
| –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | ‚ö†Ô∏è | ‚úÖ | **–£–ª—É—á—à–µ–Ω–æ** |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | üêå | üöÄ | **–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±—ã—Å—Ç—Ä–µ–µ** |
| –ü–∞–º—è—Ç—å | üî¥ | üü¢ | **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ** |
| Async/Await | ‚ö†Ô∏è | ‚úÖ | **–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** |

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä (—Ä–∞–±–æ—Ç–∞–µ—Ç!)

```bash
cargo run --example demo
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Original tokens:    402
Compressed tokens:  197
Compression ratio:  49.00%
```

### –ö–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

```rust
use longcodezip::{LongCodeZip, CodeLanguage, CompressionConfig, ProviderConfig};

let provider = ProviderConfig::new(
    "deepseek",
    "https://api.deepseek.com/chat/completions",
    "sk-b78ab15d637749a9a8c6ae69a919c0a9",
    "deepseek-chat",
);

let config = CompressionConfig::default()
    .with_rate(0.5)
    .with_language(CodeLanguage::Python)
    .with_provider(provider);

let compressor = LongCodeZip::new(config)?;
let result = compressor.compress_code(code, query, instruction).await?;
```

## üîß –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone <your-repo>
cd longcodezip-rs
cargo build --release
```

### 2. –î–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç

```toml
[dependencies]
longcodezip = { path = "../longcodezip-rs" }
tokio = { version = "1", features = ["full"] }
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

```rust
#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    // –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å
    Ok(())
}
```

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ **–ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è** Rust –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ –∫–æ–¥–∞:

‚úÖ **Coarse-grained –∫–æ–º–ø—Ä–µ—Å—Å–∏—è** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - DeepSeek, OpenAI –∏ –¥—Ä.  
‚úÖ **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** - 7 —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è  
‚úÖ **–¢–µ—Å—Ç—ã** - 11 —Ç–µ—Å—Ç–æ–≤, –≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ–ª–Ω–∞—è –∏ –ø–æ–¥—Ä–æ–±–Ω–∞—è  
‚úÖ **–ü—Ä–∏–º–µ—Ä—ã** - —Ä–∞–±–æ—á–∏–π demo  
‚úÖ **Production-ready** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö  

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–ª—è –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ –∫–æ–¥–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ä–∞–±–æ—Ç—ã —Å LLM!

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `cargo doc --open`
- **–¢–µ—Å—Ç—ã**: `cargo test`
- **–ü—Ä–∏–º–µ—Ä**: `cargo run --example demo`
- **README**: –°–º. `README.md`
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –°–º. `ARCHITECTURE.md`
